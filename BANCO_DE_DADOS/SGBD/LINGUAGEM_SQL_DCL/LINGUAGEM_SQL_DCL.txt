select version();
-- --------------------
-- PRÁTICA 1 - CENÁRIO
-- --------------------

-- 1. DATABASE
CREATE DATABASE DCL;

-- 2. SETA DATABASE
USE DCL;

-- 3. TABLE CLIENTE
CREATE TABLE CLIENTE
( CODIGO INT AUTO_INCREMENT,
  NOME VARCHAR(50) NOT NULL,
  DTHR DATETIME NOT NULL,
  PRIMARY KEY(CODIGO));
  
  SELECT * FROM CLIENTE;
  
  -- 4. INSERT
  INSERT INTO CLIENTE
  VALUES (1, 'YAN DUARTE', NOW()),
		 (2, 'RITA LEE', NOW()),
         (3, 'SAMUEL ROSA', NOW());

-- 6 PROCEDURE SP_ADICIONAR         
DELIMITER //
CREATE PROCEDURE SP_ADICIONAR(IN CLIENTE VARCHAR(50))
BEGIN
INSERT INTO CLIENTE(NOME, DTHR)
VALUES(CLIENTE,NOW());
END;

-- 7 EXECUTA SP_ADICIONA
CALL SP_ADICIONAR('ANHANGUERA BETIM');

-- 8. SELECT
SELECT * FROM CLIENTE;


-- --------------------
-- PRÁTICA 2 - CENÁRIO
-- --------------------

-- 1. USUÁRIO DO SGBD MYSQL
SELECT * FROM MYSQL.USER;

-- 2. CRIAÇÃO DE USUÁRIO NO SGBD         123: SENHA, YAN: BASE DE DADOS
CREATE USER 'YAN'@'LOCALHOST' IDENTIFIED BY '123';
CREATE USER 'ESTUDANTE'@'LOCALHOST' IDENTIFIED BY '123';

-- 4. EXCLUIR USUÁRIO NO SGB
DROP USER 'ESTUDANTE'@'LOCALHOST';


-- 5. REDEFINIÇÃO DE SENHA PARA USUÁRIO

-- 5.1 VERSÃO DO MYSQL
SELECT VERSION();

-- 5.2 VERSÃO < 5.7
SET PASSWORD FOR 'YAN'@'LOCALHOST' = PASSWORD('DCL');

-- 5.3 VERSÃO > 5.7
ALTER USER 'YAN'@'LOCALHOST' IDENTIFIED BY 'DCL';

-- 6. PRIVILÉGIO SELECT
GRANT SELECT ON DCL.CLIENTE TO 'YAN'@'LOCALHOST';

-- 7. PRIVILÉGIO SELECT
GRANT INSERT (CODIGO, NOME, DTHR) ON DCL.CLIENTE TO 'YAN'@'LOCALHOST';

-- 8. PROVILÉGIO GLOBAL ERRADO
GRANT EXECUTE ON *.* TO 'YAN'@'LOCALHOST';

-- 9. PROVILÉGIO GLOBAL CERTO
GRANT ALL PRIVILEGES ON *.* TO 'YAN'@'LOCALHOST';

-- 10. CRIAÇÃO DE USUÁRIO NO SGBD
CREATE USER 'DBA'@'LOCALHOST' IDENTIFIED BY 'DBA';

-- 11. EXPOSIÇÃO PRIVILÉGIOS
SHOW GRANTS FOR 'YAN'@'LOCALHOST';

-- 13. REVOGAR PRIVILÉGIOS ALL
REVOKE ALL PRIVILEGES ON *.* FROM 'YAN'@'LOCALHOST';


-- 14. EXCLUIR USUÁRIOS NO SGBD
DROP USER 'YAN'@'LOCALHOST';
DROP USER 'DBA'@'LOCALHOST';
DROP USER 'ESTUDANTE'@'LOCALHOST';