CREATE DATABASE AULA_PRATICA;

 CREATE TABLE ESTUDANTE
 ( MATRICULA INT AUTO_INCREMENT,  
 NOME VARCHAR(50) NOT NULL,
 EMAIL TEXT NOT NULL,
 CURSO VARCHAR(50) NOT NULL,
 PRIMARY KEY(MATRICULA) );

ALTER TABLE ESTUDANTE AUTO_INCREMENT = 1000;

INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO) VALUES ('CMN', 'CMN@CMN.BR', 'CIÊNCIA DA COMPUTAÇÃO');
INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO) VALUES ('ANA', 'ANA@ANA.BR', 'FISIOTERAPIA');
INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO) VALUES ('BETO', 'BETO@ANA.BR', 'DIREITO');


SELECT* FROM estudante;
SET AUTOCOMMIT= OFF;
delete from estudante;
SELECT * FROM estudante;
ROLLBACK;
DELETE FROM estudante;
COMMIT;
ROLLBACK;
SELECT * FROM estudante;

SET SQL_SAFE_UPDATES = 0; 
SET SQL_SAFE_UPDATES = 1; 

START TRANSACTION;
SAVEPOINT SP0;
INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO)
VALUES ('TESTE','TESTE@TESTE.BR','TESTE');

SELECT * FROM ESTUDANTE;
ROLLBACK TO SAVEPOINT SP0;

START TRANSACTION;
SAVEPOINT SP1;
UPDATE ESTUDANTE 
SET NOME = 'CRISTIANO MARTINS NUNES', 
EMAIL = 'CMN@ANHANGUERA.COM.BR', 
CURSO = 'DESIGN DE INTERIORES'
WHERE MATRICULA = 1030;

SELECT * FROM ESTUDANTE;
ROLLBACK TO SAVEPOINT SP1;
RELEASE SAVEPOINT SP1;
commit;

START TRANSACTION;
SAVEPOINT SP99;
INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO)
VALUES ('Anhanguera','betim@betim.BR','Betim/MG');

SELECT * FROM ESTUDANTE;
RELEASE SAVEPOINT SP99;
ROLLBACK TO SAVEPOINT SP99;

 /*Atividade 1*/
START TRANSACTION;
SAVEPOINT SP2;
DELETE FROM ESTUDANTE  
WHERE MATRICULA = '1032';
COMMIT;
SELECT * FROM ESTUDANTE;

INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO) VALUES ('BRENO', 'BRENO@BRENO.BR', 'CIÊNCIA DA COMPUTAÇÃO');
INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO) VALUES ('MARIA', 'MARIA@MARIA.BR', 'FISIOTERAPIA');
INSERT INTO ESTUDANTE (NOME,EMAIL,CURSO) VALUES ('JOAO', 'JOAO@JOAO.BR', 'DIREITO');

 /*Atividade 2*/
START TRANSACTION;
SAVEPOINT SP3;
DELETE FROM ESTUDANTE  
WHERE MATRICULA = '1050';
COMMIT;

ROLLBACK TO SAVEPOINT SP3;
SELECT * FROM ESTUDANTE;
 
INSERT INTO ESTUDANTE (MATRICULA,NOME,EMAIL,CURSO) VALUES ('1050','HANA', 'HANA@ANA.BR', 'FISIOTERAPIA');